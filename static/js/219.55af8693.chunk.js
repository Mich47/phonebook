"use strict";(self.webpackChunkphonebook=self.webpackChunkphonebook||[]).push([[219],{5203:function(e,n,t){t.d(n,{t:function(){return j}});var r=t(5861),i=t(9439),a=t(4687),c=t.n(a),o=t(2791),s=t(9434),l=t(5206),u=t(8792),d=t(1129),x=t(4554),m=t(7665),f=t(6151),h=t(7689),p=t(184),j=function(e){var n=e.editedId,t=(0,s.v9)(d.Af),a=(0,h.s0)(),j=(0,s.I0)(),Z=(0,o.useState)((function(){var e;return null!==(e=localStorage.getItem("name"))&&void 0!==e?e:""})),v=(0,i.Z)(Z,2),g=v[0],b=v[1],y=(0,o.useState)(!1),C=(0,i.Z)(y,2),w=C[0],k=C[1],S=(0,o.useState)((function(){var e;return null!==(e=localStorage.getItem("number"))&&void 0!==e?e:""})),I=(0,i.Z)(S,2),A=I[0],D=I[1],F=(0,o.useState)(!1),z=(0,i.Z)(F,2),P=z[0],W=z[1],_=function(){var e=(0,r.Z)(c().mark((function e(r,i,o){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n||!t.some((function(e){return e.name===i}))){e.next=5;break}return l.Am.warning("".concat(i," is already in contacts.")),k(!0),e.abrupt("return");case 5:if(e.prev=5,!n){e.next=11;break}return e.next=9,j((0,u._n)({_id:n,name:i,number:o})).unwrap();case 9:e.next=13;break;case 11:return e.next=13,j((0,u.Dk)({name:i,number:o})).unwrap();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),l.Am.error("Error saving contact");case 18:a("/contacts"),l.Am.success("Contact saved successfully"),E();case 21:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(n,t,r){return e.apply(this,arguments)}}(),E=function(){b(""),D(""),localStorage.removeItem("name"),localStorage.removeItem("number")};return(0,p.jsx)(x.Z,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:(0,p.jsxs)(x.Z,{component:"form",sx:{display:"flex",flexDirection:"column",gap:"16px"},autoComplete:"off",onSubmit:function(e){return _(e,g,A)},children:[(0,p.jsx)(x.Z,{display:"flex",flexDirection:"column",children:(0,p.jsx)(m.Z,{error:w,inputProps:{pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan"},id:"name",label:"Name",variant:"outlined",value:g,type:"text",name:"name",required:!0,autoFocus:!0,onInvalid:function(){return k(!0)},onChange:function(e){var n=e.target.value;localStorage.setItem("name",n),b(n),k(!1)}})}),(0,p.jsx)(x.Z,{display:"flex",flexDirection:"column",children:(0,p.jsx)(m.Z,{error:P,inputProps:{inputMode:"numeric",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +"},id:"number",label:"Number",variant:"outlined",value:A,type:"tel",name:"number",required:!0,onInvalid:function(){return W(!0)},onChange:function(e){var n=e.target.value;localStorage.setItem("number",n),D(n),W(!1)}})}),(0,p.jsx)(f.Z,{variant:"contained",type:"submit",children:"Save"})]})})}},1219:function(e,n,t){t.r(n),t.d(n,{default:function(){return ee}});var r=t(4708),i=t(4554),a=t(3239),c=t(3044),o=t(890),s=t(5614),l=t(5527),u=t(9836),d=t(3382),x=t(3994),m=t(9281),f=t(6890),h=t(5855),p=t(1336),j=t(9434),Z=t(8792),v=t(1129),g=t(2638),b=t(2791),y=t(9439),C=t(3767),w=t(6520),k=t(3400),S=t(1286),I=t(7247),A=t(6382),D=t(4164),F=t(5861),z=t(4687),P=t.n(z),W=t(6151),_=t(5289),E=t(7123),N=t(9157),O=t(1691),Q=t(5661),q=t(5206),M=t(184),L=function(e){var n=e.id,t=e.open,r=e.setOpen,i=(0,j.I0)(),a=function(){var e=(0,F.Z)(P().mark((function e(n){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i((0,Z.GK)(n)).unwrap();case 3:q.Am.success("Contact deleted"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),q.Am.error("Error deleting contact");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n){return e.apply(this,arguments)}}(),c=function(){r(!1)};return(0,M.jsxs)(_.Z,{open:t,onClose:c,children:[(0,M.jsx)(Q.Z,{id:"alert-dialog-title",children:"Delete from contacts?"}),(0,M.jsx)(N.Z,{children:(0,M.jsx)(O.Z,{id:"alert-dialog-description",children:"This contact will be permanently deleted from this account ."})}),(0,M.jsxs)(E.Z,{children:[(0,M.jsx)(W.Z,{variant:"contained",onClick:c,autoFocus:!0,children:"Cancel"}),(0,M.jsx)(W.Z,{variant:"contained",color:"warning",onClick:function(){return a(n)},children:"Delete"})]})]})},T=t(9823),B=t(5203),G=function(e){var n=e.id,t=e.open,r=e.setOpen,i=function(){localStorage.removeItem("name"),localStorage.removeItem("number"),r(!1)};return(0,M.jsxs)(_.Z,{fullWidth:!0,maxWidth:"xs",open:t,onClose:i,children:[(0,M.jsxs)(C.Z,{direction:"row",justifyContent:"space-between",children:[(0,M.jsx)(Q.Z,{children:"Edit contact"}),(0,M.jsx)(Q.Z,{children:(0,M.jsx)(k.Z,{"aria-label":"close",onClick:i,children:(0,M.jsx)(T.Z,{})})})]}),(0,M.jsx)(N.Z,{children:(0,M.jsx)(B.t,{editedId:n})})]})},H=function(e){var n=e.columns,t=e.row,r=(0,b.useState)(!1),i=(0,y.Z)(r,2),a=i[0],c=i[1],o=(0,b.useState)(!1),s=(0,y.Z)(o,2),l=s[0],u=s[1];return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(h.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:[n.map((function(e){var n=t[e.id];return(0,M.jsx)(p.Z,{smDown:"number"===e.id,children:(0,M.jsx)(x.Z,{align:e.align,children:n})},e.id)})),(0,M.jsx)(x.Z,{children:(0,M.jsxs)(C.Z,{direction:"row",justifyContent:"flex-end",spacing:1,children:[(0,M.jsx)(w.Z,{title:"Edit contact",children:(0,M.jsx)(k.Z,{"aria-label":"edit",onClick:function(){u(!0),localStorage.setItem("name",t.name),localStorage.setItem("number",t.number)},children:(0,M.jsx)(S.Z,{fontSize:"small"})})}),(0,M.jsx)(w.Z,{title:"Delete contact",children:(0,M.jsx)(k.Z,{"aria-label":"delete",onClick:function(){c(!0)},children:(0,M.jsx)(I.Z,{fontSize:"small"})})})]})},(0,A.x0)())]},t._id),a&&D.createPortal((0,M.jsx)(L,{id:t._id,open:a,setOpen:c}),document.querySelector("#modal-root")),l&&D.createPortal((0,M.jsx)(G,{id:t._id,open:l,setOpen:u}),document.querySelector("#modal-root"))]})},J=[{id:"name",label:"Name",minWidth:170},{id:"number",label:"Number",minWidth:100,align:"left"}],K=function(){var e=(0,j.v9)(v.c5),n=(0,j.I0)();(0,b.useEffect)((function(){n((0,Z.yF)())}),[n]);var t=(0,j.v9)(v.DI);return(0,M.jsxs)(M.Fragment,{children:[e===g.Q.loading&&(0,M.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,M.jsx)(a.Z,{})}),e===g.Q.success&&(0,M.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:(0,M.jsx)(l.Z,{sx:{width:"100%"},children:(0,M.jsx)(m.Z,{children:(0,M.jsxs)(u.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,M.jsx)(f.Z,{children:(0,M.jsxs)(h.Z,{children:[J.map((function(e){return(0,M.jsx)(p.Z,{smDown:"number"===e.id,children:(0,M.jsx)(x.Z,{align:e.align,style:{minWidth:e.minWidth,backgroundColor:"grey"},children:e.label})},e.id)})),(0,M.jsx)(x.Z,{align:"right",sx:{backgroundColor:"grey"},children:"..."},"edit")]})}),(0,M.jsx)(d.Z,{children:t.map((function(e){return(0,M.jsx)(H,{columns:J,row:e},e._id)}))})]})})})}),e===g.Q.error&&(0,M.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",pt:[2]},children:(0,M.jsx)(o.Z,{children:"Oops! Something went wrong. Please try again."})})]})},$=t(6390),R=t(7665),U=t(736),V=function(){var e=(0,j.v9)(U.A),n=(0,j.I0)();return(0,M.jsx)(i.Z,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:(0,M.jsx)(R.Z,{id:"filter",label:"Find contacts by name",variant:"outlined",value:e,type:"text",name:"filter",onChange:function(e){n((0,$.T)(e.target.value))}})})},X=t(9606),Y=t(6598);function ee(){var e=(0,j.v9)(X.u);return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(Y.Z,{component:"section",maxWidth:"md",children:[(0,M.jsx)(r.ZP,{}),e===g.Q.loading&&(0,M.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",mt:10},children:(0,M.jsx)(a.Z,{size:100})}),e===g.Q.success&&(0,M.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:"24px",mx:"auto"},children:[(0,M.jsx)(c.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,M.jsx)(s.Z,{})}),(0,M.jsx)(o.Z,{component:"h1",variant:"h5",textAlign:"center",children:"My Contacts"}),(0,M.jsx)(V,{}),(0,M.jsx)(K,{})]})]})})}},1129:function(e,n,t){t.d(n,{Af:function(){return i},DI:function(){return c},c5:function(){return a}});var r=t(736),i=function(e){return e.contacts.items},a=function(e){return e.contacts.status},c=function(e){var n=i(e),t=(0,r.A)(e);return t?n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})):n}},736:function(e,n,t){t.d(n,{A:function(){return r}});var r=function(e){return e.filter}}}]);
//# sourceMappingURL=219.55af8693.chunk.js.map